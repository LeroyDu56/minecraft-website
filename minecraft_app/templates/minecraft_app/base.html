{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GeoMC - Towny Earth Minecraft Server{% endblock %}</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="{% url 'home' %}" class="logo">GeoMC</a>
                
                <!-- Hamburger Menu Button -->
                <div class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <ul class="nav-links">
                    <li><a href="{% url 'nations' %}">Nations</a></li>
                    <li><a href="{% url 'dynmap' %}">Map</a></li>
                    <li><a href="{% url 'staff' %}">Staff</a></li>
                    <li><a href="{% url 'rules' %}">Rules</a></li>
                    <li><a href="{% url 'store' %}">Store</a></li>
                </ul>
                
                <!-- Bouton principal et auth -->
                <div class="header-actions">
                    <a href="#join" class="btn play-now-btn">Play Now</a>
                    
                    <!-- Auth section -->
                    <div class="auth-section">
                        {% if user.is_authenticated %}
                            <div class="user-profile-dropdown">
                                <div class="user-avatar" id="user-dropdown-toggle">
                                    {% if user.profile.minecraft_uuid %}
                                        <img src="https://mc-heads.net/avatar/{{ user.profile.minecraft_uuid }}/100" alt="{{ user.username }}">
                                    {% elif user.profile.minecraft_username %}
                                        <img src="https://mc-heads.net/avatar/{{ user.profile.minecraft_username }}/100" alt="{{ user.username }}">
                                    {% else %}
                                        <img src="https://mc-heads.net/avatar/MHF_Steve/100" alt="{{ user.username }}">
                                    {% endif %}
                                </div>
                                <div class="dropdown-menu" id="user-dropdown-menu">
                                    <div class="dropdown-user-info">
                                        <div class="dropdown-avatar">
                                            {% if user.profile.minecraft_uuid %}
                                                <img src="https://mc-heads.net/avatar/{{ user.profile.minecraft_uuid }}/100" alt="{{ user.username }}">
                                            {% elif user.profile.minecraft_username %}
                                                <img src="https://mc-heads.net/avatar/{{ user.profile.minecraft_username }}/100" alt="{{ user.username }}">
                                            {% else %}
                                                <img src="https://mc-heads.net/avatar/MHF_Steve/100" alt="{{ user.username }}">
                                            {% endif %}
                                        </div>
                                        <div class="dropdown-username">{{ user.username }}</div>
                                        {% if user.profile.minecraft_username %}
                                            <div class="dropdown-minecraft">{{ user.profile.minecraft_username }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="dropdown-links">
                                        <a href="{% url 'profile' %}"><i class="fas fa-user"></i> Mon profil</a>
                                        {% if user.is_staff %}
                                            <a href="{% url 'admin:index' %}"><i class="fas fa-cog"></i> Administration</a>
                                        {% endif %}
                                        <a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> DÃ©connexion</a>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <div class="auth-buttons">
                                <a href="{% url 'login' %}" class="btn-auth login">Connexion</a>
                                <a href="{% url 'register' %}" class="btn-auth register">Inscription</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </nav>
        </div>
    </header>
    
    <!-- Messages -->
    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
            <div class="message message-{{ message.tags }}">
                {{ message }}
                <button class="message-close"><i class="fas fa-times"></i></button>
            </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% block content %}{% endblock %}
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>GeoMC</h3>
                    <p>Towny Minecraft server on a 1:1000 scale Earth map. Create your town, join a nation, and shape the history of the world.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="{% url 'home' %}">Home</a></li>
                        <li><a href="{% url 'nations' %}">Nations</a></li>
                        <li><a href="{% url 'dynmap' %}">Map</a></li>
                        <li><a href="{% url 'store' %}">Store</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Information</h3>
                    <ul class="footer-links">
                        <li><a href="{% url 'rules' %}">Rules</a></li>
                        <li><a href="{% url 'staff' %}">Staff</a></li>
                        <li><a href="{% url 'faq' %}">FAQ</a></li>
                        <li><a href="{% url 'contact' %}">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Join Us</h3>
                    <div class="server-status">
                        <span class="status-indicator {% if server.status %}status-online{% else %}status-offline{% endif %}"></span>
                        <span>{% if server.status %}Online{% else %}Offline{% endif %}</span>
                        <span class="player-count">{{ server.player_count }}/{{ server.max_players }}</span>
                    </div>
                    <div class="server-ip">play.geomc.fr</div>
                    <div class="social-links">
                        <a href="#" title="Discord"><i class="fab fa-discord"></i></a>
                        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <p class="copyright">&copy; 2025 GeoMC. All rights reserved. Minecraft is a registered trademark of Mojang AB.</p>
        </div>
    </footer>
    
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>